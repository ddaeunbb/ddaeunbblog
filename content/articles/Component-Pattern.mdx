---
title: 컴포넌트의 IoC패턴
date: 2023-10-01
category: Articles
tags:
  - CSS
  - Next.js
---

리액트로 개발을 하다보면 컴포넌트가 기본 기능대로만 작동하기 보다는 원하는 방식대로 확장되어서 작동하길 바랄때가 있습니다.
이럴 때 우리는 IoC패턴(Inversion of Control) 즉, 제어 역전 패턴을 통해서 컴포넌트를 사용하는 개발자에게 제어권을 넘겨 개발자가 원하는대로 컨트롤하게 할 수 있습니다.

## 렌더링 IoC

컴포넌트는 기본적으로 프로퍼티(props)와 상태(state)를 **내부 로직들로 가공**하여 최종적으로 화면에 렌더링하는 결과물을 나타냅니다. 즉, 컴포넌트 사용자는 단지 렌더링 요소에 프로퍼티만 전달할 뿐, 렌더링 결과물을 컴포넌트 내부에 의해서만 결정된다고 할 수 있습니다.

그런데 만약에 사용중이던 컴포넌트가 특정 조건에서는 다른 결과물을 내야하는 상황이라면 어떻게 해야할까요?
간단하게 컴포넌트를 수정해서 새로운 프로퍼티를 받았을 때는 다르게 렌더링하도록 조건을 설정할 수 있을 것입니다.

하지만 프로퍼티의 종류가 많아지게 된다면 컴포넌트는 점점 더 복잡해지겠죠. 또한 이미 사용 중인 컴포넌트를 수정하면서 예기치 못한 에러를 마주할 수도 있습니다.

그렇다면 이렇게 변화가 많은 부분에 대해서 컴포넌트 내부에 의해서 렌더링 결과물을 내지 않고 컴포넌트를 사용하는 사용자 입장에서 렌더링 방식을 컨트롤 할 수는 없을까요?

---

## Render Props 패턴

`Render Prop`패턴은 간단하게 컴포넌트가 렌더링 함수를 프로퍼티로 전달받아 사용하는 방법입니다.

```tsx
interface IRenderPropsList<T>{
  renderItem: (data: T) => ReactNode;
  dataSource: Array<T>;
}

const RenderPropList = function <T>({ dataSource, renderItem}: IRenderPropsList<T>){
  return(
    <div>
      <span>List Count : {totalCount}</span>
      <ul>
        {dataSource.map((data, index) => {
          if (renderItem) {
            return <li key={index}>{renderItem(data)}</li>;
          }
          return <li key={index}>{String(data)}</li>;
        })}
      </ul>
    </div>
  )
}
```

```tsx
/** App.tsx */
const App: React.FC = function () {
  const [data, setData] = useState([
    { id: 1, name: "flower", score: 91 },
    { id: 2, name: "geoji", score: 100 },
    { id: 3, name: "novell", score: 73 },
    { id: 4, name: "star", score: 84 },
  ]);

  return (
    <RenderPropsList
      dataSource={data}
      renderItem={({ name, score }) => {
        return (
          <div>
            <span>{`Name : ${name} , Score : ${score}`}</span>
          </div>
        );
      }}
    />
  );
};
```

위의 예제처럼 컴포넌트 사용자는 아주 간단하게 `render` 프로퍼티만 전달함으로써 컴포넌트의 렌더링 방식을 컨트롤할 수 있고, 좀 더 유연한 방식하고 다양한 방법으로 컴포넌트를 활용할 수 있습니다.

이러한 Render Props 패턴은 구현도 간단하고, 동일한 렌더링 방식이 연속적으로 사용되는 컴포넌트(리스트나 테이블 형태)에서는 아주 유용합니다. 하지만 복잡한 조건의 렌더링 방식을 표현하기에는 제한이 있으며, 자칫 잘못하면 render 함수가 너무 복잡해지거나 render 프로퍼티가 너무 많아지는 문제가 발생할 수 있습니다.

그렇다면 복잡한 조건을 처리할 수 있고, 좀 더 컴포넌트스럽게 렌더링을 컨트롤할 수 있는 방법은 없을까요? 그 방법을 위해서 이번에는 합성 컴포넌트에 대해 알아보겠습니다.

